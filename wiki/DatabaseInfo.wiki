=Database tables list=

The aim of this page is to document the creation and administration of the SQL database.  
http://code.google.com/p/drydock/source/browse/branches/drydock-june11-SQLITE-TEST-BUILD/dbi/MySQL-setup.sql
http://code.google.com/p/drydock/source/browse/branches/drydock-june11-SQLITE-TEST-BUILD/dbi/SQLite-setup.sql

The layout of this document follows this pattern:
  * {{{  MySQL example  }}}
  * {{{  SQLite example  }}}

   Description of the field.

==THbans_table==
This table holds banned IP addresses.
  * {{{ `ip` int unsigned NOT NULL }}}
  * {{{ ip INT PRIMARY KEY }}}
IP address we are banning
  * {{{ `subnet` tinyint(3) unsigned NOT NULL default '0' }}}
  * {{{ subnet TINYINT(3)  }}}
Used for subnet bans
  * {{{ `publicreason` text  NOT NULL }}}
  * {{{ publicreason TEXT }}}
(User was banned for this reason)
  * {{{ `privatereason` text  NOT NULL }}}
  * {{{ privatereason TEXT }}}
Seen only by the person banned, used for sending notes to the person banned
  * {{{ `adminreason` text  NOT NULL }}}
  * {{{ adminreason TEXT }}}
Displayed in the admin ban page, can be used for sending notes on the ban to other admins
  * {{{ `postdata` longtext  NOT NULL }}}
  * {{{ postdata LONGTEXT }}}
The contents of the post
  * {{{ `duration` int(11) NOT NULL default '-1' }}}
  * {{{ duration INT(11) }}}
Duration of ban in hours.  Default -1 is permaban, 0 is just a warning that will expire on viewing
  * {{{ `bantime` int(11) unsigned NOT NULL }}}
  * {{{ bantime INT(11)  }}}
The time the ban was set
  * {{{ `bannedby` varchar(100)  NOT NULL }}}
  * {{{ bannedby VARCHAR(100) }}}
Who did the banning?
  * {{{ PRIMARY KEY  (`ip`) }}}
  * {{{ Not needed for SQLite  }}}





==THblotter_table==
The update blotter (viewable on board view in most templates under the post block)
  * {{{ `id` mediumint(8) unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
ID number for tracking
  * {{{ `time` int(11) unsigned NOT NULL }}}
  * {{{ time INT(11) }}}
Time updated
  * {{{ `entry` text collate utf8_unicode_ci NOT NULL }}}
  * {{{ entry TEXT }}}
The text of the blotter entry
  * {{{ `board` smallint(5) unsigned NOT NULL }}}
  * {{{ board SMALLINT(5)  }}}
Which boards is it available on
  * {{{ PRIMARY KEY (`id`) }}}
  * {{{ Not needed for SQLite  }}}





==THboards_table==
The boards we have set up
  * {{{ `id` smallint(5) unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
Board ID for tracking
  * {{{ `globalid` int unsigned NOT NULL default '0' }}}
  * {{{ globalid INT }}}
Current "top post" value
  * {{{ `name` text  NOT NULL }}}
  * {{{ name TEXT }}}
The title of the board ("random")
  * {{{ `folder` varchar(50)  NOT NULL }}}
  * {{{ folder VARCHAR(50) }}}
The folder ("/b/")
  * {{{ `about` text  NOT NULL }}}
  * {{{ about TEXT }}}
A description of the board ("that's why they call it /b/ xd")
  * {{{ `rules` text  NOT NULL }}}
  * {{{ rules TEXT }}}
Specific rules ("don't post here)
  * {{{ `perpg` tinyint(3) unsigned NOT NULL default '20' }}}
  * {{{ perpg TINYINT(3) }}}
Per-page display limit.  Default 20 threads per page
  * {{{ `perth` tinyint(3) unsigned NOT NULL default '4' }}}
  * {{{ perth TINYINT(3) }}}
Replies visible per thread on board view.  Default shows top post and 4 recent replies
  * {{{ `hidden` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ hidden TINYINT(1) }}}
Is the board hidden from the board list?
  * {{{ `allowedformats` tinyint(3) unsigned NOT NULL default '7' }}}
  * {{{ allowedformats TINYINT(1) }}}
Which file formats are allowed?
  * {{{ `forced_anon` tinyint(1) NOT NULL default '0' }}}
  * {{{ forced_anon TINYINT(1) }}}
Is forced_anon turned on?
  * {{{ `maxfilesize` int(11) unsigned NOT NULL default '2097152' }}}
  * {{{ maxfilesize INT(11) }}}
Max file size in bytes.  Default 2mb
  * {{{ `maxres` int(5) unsigned NOT NULL default '3000' }}}
  * {{{ maxres INT(5) }}}
Maximum resolution in pixels
  * {{{ `thumbres` int(5) unsigned NOT NULL default '150' }}}
  * {{{ thumbres INT(5) }}}
Thumb resolution (matches x or y or both)
  * {{{ `pixperpost` int(2) unsigned NOT NULL default '8' }}}
  * {{{ pixperpost INT(2) }}}
Pictures allowed per posting.  Default is 8.  Should work at any value (untested past 16)
  * {{{ `allowvids` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ allowvids TINYINT(1) }}}
Allow youtube/myspace etc video posts
  * {{{ `customcss` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ customcss TINYINT(1) }}}
A custom css can be defined, named the same as the board folder.css
  * {{{ `filter` tinyint(1) unsigned NOT NULL default '1' }}}
  * {{{ filter TINYINT(1) }}}
Word filters
  * {{{ `boardlayout` char(255) NOT NULL default 'drydock-image' }}}
  * {{{ boardlayout VARCHAR(255) }}}
Which board template should we use?  Should match folder name in tpl/
  * {{{ `requireregistration` tinyint(1) NOT NULL default '0' }}}
  * {{{ requireregistration TINYINT(1) }}}
Does the board require a registered profile?  Useful for admin/mod boards or sites with registration
  * {{{ `tlock` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ tlock TINYINT(1) }}}
No new threads
  * {{{ `rlock` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ rlock TINYINT(1) }}}
No replies
  * {{{ `tpix` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ tpix TINYINT(1) }}}
New post picture requirement
  * {{{ `rpix` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ rpix TINYINT(1) }}}
Replies allow pictures
  * {{{ `tmax` smallint(5) unsigned NOT NULL default '100' }}}
  * {{{ tmax SMALLINT(5) }}}
max number of threads
  * {{{ `lasttime` int(11) unsigned NOT NULL default '0' }}}
  * {{{ lasttime INT(11)  }}}
Last post timestamp
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}


==THcapcodes_table==
Capcodes
  * {{{ `id` smallint(5) unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
ID number for db tracking
  * {{{ `capcodefrom` varchar(11)  NOT NULL }}}
  * {{{ capcodefrom VARCHAR(11) }}}
The hashed tripcode 
  * {{{ `capcodeto` text  NOT NULL }}}
  * {{{ capcodeto TEXT }}}
What do we change it to?
  * {{{ `notes` text  NOT NULL }}}
  * {{{ notes TEXT  }}}
notes for admin page
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}





==THextrainfo_table==
EXIF and metadata info
  * {{{ `id` int unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
id for tracking 
  * {{{ `extra_info` longtext  NOT NULL }}}
  * {{{ extra_info LONGTEXT  }}}
contents of exif data (or other metadata)
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}





==THfilters_table==
Wordfilters
  * {{{ `id` int unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
id for tracking
  * {{{ `filterfrom` text collate utf8_unicode_ci NOT NULL }}}
  * {{{ filterfrom TEXT }}}
word/regex we filter from
  * {{{ `filterto` text collate utf8_unicode_ci NOT NULL }}}
  * {{{ filterto TEXT }}}
what do we change it to
  * {{{ `notes` text collate utf8_unicode_ci NOT NULL }}}
  * {{{ notes TEXT  }}}
comments
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}





==THimages_table==
Posted images
  * {{{ `id` int unsigned NOT NULL }}}
  * {{{ id INT  }}}
id for finding them to pair with posts
  * {{{ `hash` varchar(40) NOT NULL default '' }}}
  * {{{ hash VARCHAR(40) }}}
hashed value of the image
  * {{{ `name` tinyblob NOT NULL }}}
  * {{{ name TINYBLOB }}}
filename
  * {{{ `width` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ width SMALLINT(5)  }}}
resolution
  * {{{ `height` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ height SMALLINT(5)  }}}
resolution
  * {{{ `tname` tinyblob NOT NULL }}}
  * {{{ tname TINYTBLOB }}}
thumb filename
  * {{{ `twidth` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ twidth SMALLINT(5)  }}}
thumb res
  * {{{ `theight` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ theight SMALLINT(5)  }}}
thumb res
  * {{{ `fsize` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ fsize SMALLINT(5)  }}}
filesize
  * {{{ `anim` tinyint(1) unsigned default '0' }}}
  * {{{ anim TINYINT(1)  }}}
animated flag
  * {{{ `extra_info` int(11) unsigned NOT NULL default '0' }}}
  * {{{ extrainfo INT(11)  }}}
exif id (matches id in extra_info table)
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}





==THusers_table==
Registered users
  * {{{ `username` varchar(30) NOT NULL default '' }}}
  * {{{ username VARCHAR(30) PRIMARY KEY }}}
username
  * {{{ `password` varchar(32) default NULL }}}
  * {{{ password VARCHAR(32) }}}
password
  * {{{ `userid` varchar(32) default NULL }}}
  * {{{ userid VARCHAR(32) }}}
32char user id (unique)
  * {{{ `userlevel` tinyint(1) unsigned NOT NULL default '1' }}}
  * {{{ userlevel TINYINT(1)  }}}
user level (for future userlevels)
  * {{{ `email` varchar(50) default NULL }}}
  * {{{ email VARCHAR(50) }}}
email address
  * {{{ `mod_array` varchar(100) NOT NULL default '0' }}}
  * {{{ mod_array VARCHAR(100) }}}
where can they mod?
  * {{{ `mod_global` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ mod_global TINYINT(1)  }}}
global mod?
  * {{{ `mod_admin` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ mod_admin TINYINT(1)  }}}
global admin?
  * {{{ `timestamp` int(11) unsigned NOT NULL default '0' }}}
  * {{{ timestamp INT(11)  }}}
timestamp of last login
  * {{{ `age` tinyint(3)  default NULL }}}
  * {{{ age VARCHAR(3) }}}
user's age
  * {{{ `gender` varchar(1)  default NULL }}}
  * {{{ gender VARCHAR(1) }}}
user's gender
  * {{{ `location` text  }}}
  * {{{ location TEXT }}}
user's location
  * {{{ `contact` longtext  }}}
  * {{{ contact LONGTEXT }}}
other contact info
  * {{{ `description` longtext  }}}
  * {{{ description LONGTEXT }}}

  * {{{ `capcode` varchar(11)  default NULL }}}
  * {{{ capcode VARCHAR(11) }}}

  * {{{ `has_picture` varchar(4)  default NULL }}}
  * {{{ has_picture VARCHAR(4) }}}
picture is in images/profiles and matches username.ext - this field holds .ext (jpg/png/etc)
  * {{{ `approved` tinyint(1) NOT NULL default '0' }}}
  * {{{ approved TINYINT(1) }}}
approved user?
  * {{{ `pic_pending` varchar(4)  default NULL }}}
  * {{{ pic_pending VARCHAR(4) }}}
has a pending picture, same as has_picture
  * {{{ `proposed_capcode` text  default NULL }}}
  * {{{ proposed_capcode TEXT  }}}
they want this capcode
  * {{{ PRIMARY KEY  (`username`) }}}
  * {{{ Not needed for SQLite  }}}





==THthreads_table==
Threads
  * {{{ `id` int unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
id for tracking
  * {{{ `globalid` int unsigned NOT NULL default '0' }}}
  * {{{ globalid INT }}}
global id for displaying in boards
  * {{{ `board` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ board SMALLINT(5) }}}
what board is it on
  * {{{ `thread` int unsigned NOT NULL default '0' }}}
  * {{{ thread INT }}}
what thread does it apply to
  * {{{ `title` text }}}
  * {{{ title TEXT }}}
the title
  * {{{ `name` text  NOT NULL }}}
  * {{{ name TEXT }}}
who posted
  * {{{ `trip` varchar(11) NOT NULL default '' }}}
  * {{{ trip VARCHAR(11) }}}
their tripcode
  * {{{ `body` longtext  NOT NULL }}}
  * {{{ body LONGTEXT }}}
content
  * {{{ `time` int(11) unsigned NOT NULL default '0' }}}
  * {{{ time INT(11) }}}
when
  * {{{ `ip` int(11) NOT NULL default '0' }}}
  * {{{ ip INT(11) }}}
posters ip
  * {{{ `pin` tinyint(1) NOT NULL }}}
  * {{{ pin TINYINT(1) }}}
sticky?
  * {{{ `lawk` tinyint(1) NOT NULL }}}
  * {{{ lawk TINYINT(1) }}}
locked?
  * {{{ `bump` tinyint(1) unsigned NOT NULL default '1' }}}
  * {{{ bump INT(11) }}}
when last bumped
  * {{{ `imgidx` mediumint(8) unsigned NOT NULL default '0' }}}
  * {{{ imgidx MEDIUMINT(8) }}}
matches image id in images table
  * {{{ `visible` tinyint(1) NOT NULL default '1' }}}
  * {{{ visible TINYINT(1) }}}
is the post visible?
  * {{{ `unvisibletime` int(11) NOT NULL default '0' }}}
  * {{{ unvisibletime INT(11) }}}
when was it hid
  * {{{ `permasage` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ permasage TINYINT(1) }}}
no bumping
  * {{{ `link` text  NOT NULL }}}
  * {{{ link TEXT  }}}
sage
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}

  
  
==THreplies_table==
Replies to threads
  * {{{ `id` int unsigned NOT NULL auto_increment }}}
  * {{{ id INTEGER PRIMARY KEY }}}
id for tracking
  * {{{ `globalid` int unsigned NOT NULL default '0' }}}
  * {{{ globalid INT }}}
global id for displaying in boards
  * {{{ `board` smallint(5) unsigned NOT NULL default '0' }}}
  * {{{ board SMALLINT(5) }}}
what board is it on
  * {{{ `thread` int unsigned NOT NULL default '0' }}}
  * {{{ thread INT }}}
what thread does it apply to
  * {{{ `title` text }}}
  * {{{ title TEXT }}}
the title
  * {{{ `name` text  NOT NULL }}}
  * {{{ name TEXT }}}
who posted
  * {{{ `trip` varchar(11) NOT NULL default '' }}}
  * {{{ trip VARCHAR(11) }}}
their tripcode
  * {{{ `body` longtext  NOT NULL }}}
  * {{{ body LONGTEXT }}}
content
  * {{{ `time` int(11) unsigned NOT NULL default '0' }}}
  * {{{ time INT(11) }}}
when
  * {{{ `ip` int(11) NOT NULL default '0' }}}
  * {{{ ip INT(11) }}}
posters ip
  * {{{ `pin` tinyint(1) NOT NULL }}}
  * {{{ pin TINYINT(1) }}}
sticky?
  * {{{ `lawk` tinyint(1) NOT NULL }}}
  * {{{ lawk TINYINT(1) }}}
locked?
  * {{{ `bump` tinyint(1) unsigned NOT NULL default '1' }}}
  * {{{ bump INT(11) }}}
when last bumped
  * {{{ `imgidx` mediumint(8) unsigned NOT NULL default '0' }}}
  * {{{ imgidx MEDIUMINT(8) }}}
matches image id in images table
  * {{{ `visible` tinyint(1) NOT NULL default '1' }}}
  * {{{ visible TINYINT(1) }}}
is the post visible?
  * {{{ `unvisibletime` int(11) NOT NULL default '0' }}}
  * {{{ unvisibletime INT(11) }}}
when was it hid
  * {{{ `permasage` tinyint(1) unsigned NOT NULL default '0' }}}
  * {{{ permasage TINYINT(1) }}}
no bumping
  * {{{ `link` text  NOT NULL }}}
  * {{{ link TEXT  }}}
sage
  * {{{ PRIMARY KEY  (`id`) }}}
  * {{{ Not needed for SQLite  }}}